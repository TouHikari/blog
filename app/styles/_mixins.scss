// ============================================================================
// TouHikari.top 赛博朋克主题 Mixins
// ============================================================================

@use './variables' as *;

// ----------------------------------------------------------------------------
// 霓虹效果 Mixins
// ----------------------------------------------------------------------------

// 霓虹文字效果
@mixin neon-text($color: $neon-cyan, $intensity: 0.6) {
  color: $color;
  text-shadow: 0 0 10px rgba($color, $intensity),
               0 0 2px rgba($color, $intensity + 0.2);
}

// 霓虹边框效果
@mixin neon-border($color: $neon-cyan, $width: 1px, $intensity: 0.3) {
  border: $width solid rgba($color, $intensity);
  box-shadow: 0 0 10px rgba($color, $intensity * 0.5);
}

// 霓虹盒子阴影
@mixin neon-glow($color: $neon-cyan, $size: 20px, $intensity: 0.06) {
  box-shadow: 0 0 $size rgba($color, $intensity);
}

// 双色霓虹渐变
@mixin neon-gradient($color1: $neon-cyan, $color2: $neon-pink, $direction: 90deg) {
  background: linear-gradient($direction, $color1, $color2);
}

// ----------------------------------------------------------------------------
// 容器 Mixins
// ----------------------------------------------------------------------------

// 赛博朋克容器
@mixin cyber-container($max-width: $container-max-width, $padding: $container-padding) {
  max-width: $max-width;
  margin: 0 auto;
  padding: $padding;
  background: $black-55;
  border: 1px solid $border-primary;
  border-radius: $border-radius-lg;
  box-shadow: $box-shadow-container;
}

// 玻璃磨砂效果
@mixin glass-effect($blur: 6px, $opacity: 0.9) {
  backdrop-filter: blur($blur);
  background: rgba($bg-primary, $opacity);
}

// ----------------------------------------------------------------------------
// 响应式 Mixins
// ----------------------------------------------------------------------------

// 移动端断点
@mixin mobile {
  @media (max-width: $breakpoint-mobile) {
    @content;
  }
}

// 平板断点
@mixin tablet {
  @media (max-width: $breakpoint-tablet) {
    @content;
  }
}

// 桌面端断点
@mixin desktop {
  @media (min-width: $breakpoint-desktop) {
    @content;
  }
}

// ----------------------------------------------------------------------------
// 动画 Mixins
// ----------------------------------------------------------------------------

// 平滑过渡
@mixin smooth-transition($property: all, $duration: $transition-normal, $easing: $ease-out) {
  transition: $property $duration $easing;
}

// 霓虹脉冲动画
@mixin neon-pulse($color: $neon-cyan) {
  animation: neon-pulse-#{unique-id()} 2s ease-in-out infinite alternate;
  
  @keyframes neon-pulse-#{unique-id()} {
    from {
      text-shadow: 0 0 10px rgba($color, 0.6),
                   0 0 2px rgba($color, 0.8);
    }
    to {
      text-shadow: 0 0 20px rgba($color, 0.8),
                   0 0 4px rgba($color, 1);
    }
  }
}

// 扫描线动画
@mixin scanline-animation($duration: $animation-scan) {
  animation: scanline $duration linear infinite;
  
  @keyframes scanline {
    0% { opacity: $scanline-opacity-min; }
    50% { opacity: $scanline-opacity-max; }
    100% { opacity: $scanline-opacity-min; }
  }
}

// ----------------------------------------------------------------------------
// 文字 Mixins
// ----------------------------------------------------------------------------

// 赛博朋克标题
@mixin cyber-heading($level: 1) {
  font-family: var(--font-cyber);
  text-transform: uppercase;
  letter-spacing: $letter-spacing-wide;
  
  @if $level == 1 {
    @include neon-text($neon-cyan-light);
    font-size: $font-size-h1;
    font-weight: $font-weight-bold;
    border-bottom: 1px dashed $border-accent;
    padding-bottom: $spacing-sm;
    margin-bottom: $spacing-xl;
  } @else if $level == 2 {
    color: $neon-cyan-pale;
    font-size: $font-size-h2;
    font-weight: $font-weight-medium;
    border-left: 4px solid $neon-pink-light;
    padding-left: $spacing-md;
    margin-top: $spacing-2xl;
    margin-bottom: $spacing-md;
  }
}

// 代码文字样式
@mixin code-text($inline: false) {
  font-family: var(--font-mono);
  font-feature-settings: "liga" 1, "calt" 1;
  
  @if $inline {
    background: $bg-code-inline;
    color: $neon-cyan-inline;
    border: 1px solid rgba($neon-cyan, 0.24);
    padding: 0.2em 0.4em;
    border-radius: $border-radius-sm;
    font-size: $font-size-small;
  } @else {
    background: $black-85;
    color: $neon-cyan-code;
    border: 1px solid $border-strong;
    box-shadow: $box-shadow-code;
    padding: $spacing-lg;
    border-radius: $border-radius-md;
    overflow-x: auto;
  }
}

// ----------------------------------------------------------------------------
// 实用工具 Mixins
// ----------------------------------------------------------------------------

// 隐藏滚动条
@mixin hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
  
  &::-webkit-scrollbar {
    display: none;
  }
}

// 文本截断
@mixin text-truncate {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 多行文本截断
@mixin text-truncate-lines($lines: 3) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// 绝对居中
@mixin absolute-center {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

// Flex 居中
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// 清除浮动
@mixin clearfix {
  &::after {
    content: "";
    display: table;
    clear: both;
  }
}
